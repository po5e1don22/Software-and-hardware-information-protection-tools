### Откуда взялись эти названия L2, L3?
Из 7 уровней модели OSI.

- **Коммутатор L2** работает на втором, канальном уровне.
- **Коммутатор L3** работает как на втором, так и на третьем уровне.
![[Pasted image 20250601152247.png]]
В самом простом случае коммутатор служит для связи нескольких устройств локальной сети (LAN). Этими устройствами могут быть, например, отдельные компьютеры или другие коммутаторы.

Именно так работает коммутатор L2 — на уровне Ethernet: анализирует аппаратные MAC адреса, заносит их в таблицу коммутации и согласно этой таблице перераспределяет трафик.

Коммутатор L3 тоже может анализировать пакеты по MAC адресам и перенаправлять кадры между подключёнными устройствами, но, помимо пересылки Ethernet кадров, он умеет перенаправлять трафик, основываясь на анализе IP адресов и выполнять функции внутреннего маршрутизатора.

Коммутатор L2 обрабатывает и регистрирует MAC адреса фреймов, осуществляет физическую адресацию и управления потоком данных. Некоторые дополнительные функции: VLAN, QoS поддерживаются только на уровне, необходимом для передачи параметров или для участия в общей схеме сети. Например, на коммутаторе L2 можно прописать несколько VLAN, но нельзя настроить полноценную маршрутизацию между ними, для этого уже нужен коммутатор L3. Проще говоря, коммутатор уровня L2 обеспечивает некоторые дополнительные функции, но не управляет ими в масштабе сети.

В отличие от своих более простых собратьев, коммутаторы L3 могут брать на себя функции маршрутизаторов, в том числе проверку логической адресации и выбор пути (маршрута) доставки данных. Благодаря повсеместному внедрению стека протоколов TCP/IP, коммутаторы уровня L3 являются важной частью сети, так как могут выполнять пересылку пакетов не только на основе анализа MAC адресов, но и «поднимаясь на этаж выше», то есть на основе IP адресов и соответствующих протоколов маршрутизации

Разумеется, никому в голову не придёт строить внешнюю разветвлённую сеть с BGP маршрутизацией на базе коммутаторов. Однако для внутренней маршрутизации в пределах локальной сети такой вариант вполне подходит. Мало того, это позволяет экономить на приобретении дополнительных устройств (маршрутизаторов), использовать универсальный подход к организации сети.

Из-за поддержки многих функций коммутатор уровня L3 имеют более сложную внутреннюю конфигурацию и, соответственно, стоят дороже. Иногда пользователь встаёт перед выбором: купить более простой и бюджетный вариант с Layer 2 или более дорогой и «продвинутый» Layer 3.

Помимо уровней модели OSI: Layer 2, Layer 3, в литературе часто упоминаются «уровень доступа», «уровень агрегации», «уровень ядра сети».

- Уровень доступа — группа коммутаторов, основной задачей которых является подключения пользователей к сети.
- Уровень агрегации (или уровень распределения) — следующая группа, которая объединяет коммутаторы уровня доступа, позволяет выполнить настройки управления и маршрутизации и делегирует Uplink на более высокий уровень — уровень ядра сети.
- Уровень ядра сети — центральный узел, который объединяет все ветви коммутаторов уровня агрегации с подключёнными коммутаторами уровня доступа в единую сеть.
![[Pasted image 20250601152547.png]]

Коммутаторы, которые служат для объединения других коммутаторов в единую сеть, называют коммутаторы уровня агрегации (или коммутаторы уровня распределения).

Если же говорить про уровень ядра сети, то для него существуют свои мощные коммутаторы, основная задача которых максимально быстро передавать трафик. Функции управления при этом довольно часто делегируется на уровень агрегации.

Есть ли связь между понятиями уровней L2 и L3 с уровнем доступа и уровнем агрегации? Традиционно считается, что для уровня доступа лучше подходят коммутаторы L2 (в первую очередь из-за более низкой цены, а для уровня агрегации лучше выбирать L3 ради повышенной функциональности.

Чем хорош такой подход? Устанавливать более функциональные и дорогие коммутаторы уровня L3 на уровне доступа может быть неоправданным шагом, если их функции маршрутизации и контроля не будут востребованы. А этих же функций будет недоставать более простым коммутаторам L2 на уровне агрегации (распределения).

Если есть сомнения какой уровень коммутатора выбрать: уровня 2 или уровня 3, во главу угла нужно ставить вопрос, где его предполагается использовать. Если в наличии только небольшая сеть, позволяющая всем работать в единственном широковещательном домене, можно остановить свой выбор на одном или двух коммутаторах L2.

Второй случай, где коммутаторы второго уровня хорошо себя чувствуют — уровень доступа, то есть там, где компьютеры пользователей подключаются к локальной сети.

Если необходим коммутатор для объединения (агрегирования) нескольких простых коммутаторов доступа пользователей — для этой роли лучше подходит коммутатор уровня 3. Помимо объединения в сеть, он может выполнять маршрутизацию между VLAN, управлять прохождением трафика при помощи ACL (Access Control List), обеспечивать заданный уровень ширины пропускания (QoS) и так далее.

Ещё одна область, где коммутаторы L3 часто бывают востребованы — если необходимо обеспечить повышенные требования к безопасности, например, более гибкое разграничение доступа. Некоторые функции, доступные для этого уровня, например, управление трафиком на уровне IP адресов, будут неосуществимы стандартными средства уровня L2.

### L2/L2+ 

Устройства для коммутации канального типа выполняют сложные задачи по сравнению с устройствами 1 типа. Их главная функция – обеспечивать передачу данных между устройствами внутри одной сети с использованием MAC-адресов, что дает им возможность определять источники и получателей трафика.

Эти приборы анализируют каждый входящий сигнал и на основе MAC-адреса решают, на какой порт его передать. Они строят и поддерживают таблицы MAC-адресов, которые связывают конкретного адресата с определенным портом коммутатора. Это позволяет устройству направлять данные только к нужному получателю, и тем самым уменьшить объем ненужного трафика в сети.

Отдельно стоит отметить коммутаторы уровня L2+. Они работают на канальном уровне, но при этом поддерживают ряд дополнительных опций, в полной мере доступных только на третьем уровне. В отличие от стандартных устройств 2 уровня, они могут обрабатывать базовую маршрутизацию между глобальными сетями и управлять IP-трафиком, но без полной функциональности L3. 

L2+ устройства являются промежуточным решением для сетей, где требуется простое управление трафиком и маршрутизация, но не нужна сложная конфигурация полноценного маршрутизатора.

### Возможности применения L2/L2+

Коммутаторы второго уровня применяются в широком спектре задач для управления сетями, их ключевые сценарии использования включают:

- Сегментация сети. В крупных сетях часто возникает необходимость в разделении трафика для различных подразделений, отделов или пользовательских групп. Для этого применяются виртуальные локальные сети (также известные как VLAN). Они дают логически отделить устройства и пользователей, что улучшает безопасность и оптимизирует распределение сетевых ресурсов.
- Эффективное управление трафиком. Устройства управляют трафиком, направляя данные напрямую к конкретным устройствам внутри сети. На фоне хаб-устройств, которые в большинстве своем транслируют пакеты на все порты без разбора, коммутаторы 2 уровня анализируют MAC-адреса и перенаправляют информацию исключительно нужному получателю. Это минимизирует ненужный трафик и снижает нагрузку на сеть.
- Использование в малых компаниях и офисах. Для небольших организаций и отдельных подразделений крупных предприятий коммутаторы L2 являются оптимальным выбором. Они предлагают хорошее сочетание стоимости и функциональности для простых сетевых решений, где нет необходимости в сложных маршрутизациях и глубоких фильтрациях трафика.

Кроме того, коммутаторы 2 уровня могут применяться для связи локальных сетей с более крупными инфраструктурами или магистральными линиями связи, обеспечивая передачу трафика на более высокие уровни маршрутизации, где требуется дополнительная обработка данных.

### Преимущества и недостатки

Популярность коммутаторов второго уровня обусловлена несколькими ключевыми достоинствами:

- **Поддержка VLAN.** Возможность создавать виртуальные сети (VLAN) позволяет разделять физическую сеть на отдельные логические сегменты, которые могут работать независимо друг от друга. Это не только повышает безопасность, но и делает управление сетью более гибким и эффективным.
- **Отсутствие коллизий в сети.** Коммутаторы второго уровня устраняют проблему коллизий, с которой часто сталкиваются сети, построенные на концентраторах. Каждый порт коммутатора работает в режиме полного дуплекса, что обеспечивает стабильную передачу данных без конфликтов.
- **Поддержка множества стандартов Ethernet.** Коммутаторы уровня 2 поддерживают современные стандарты передачи данных, включая 10 Gigabit Ethernet, что позволяет адаптироваться к растущим требованиям к пропускной способности сетей.

В то же время, у таких коммутаторов есть и недостатки, которые ограничивают их использование:

- Отсутствие маршрутизации. Одним из главных ограничений таких устройств является их неспособность маршрутизировать трафик между разными сетями. Они могут управлять передачей данных только внутри локальной сети и не поддерживают работу с IP-адресами.
- Ограниченная масштабируемость. В крупных сетях с множеством сегментов коммутаторы 2 уровня могут создавать сложности, так как они не могут управлять трафиком между подсетями. В таких случаях требуются устройства уже 3 уровня либо же маршрутизаторы.
- Отсутствие управления на уровне приложений. Устройства не могут анализировать трафик на уровне приложений или протоколов, таких как TCP или UDP. По этой причине они не могут обеспечивать приоритезацию трафика на основе его содержания, что может быть критично для сетей, где не на последнем месте стоит высокое качество обслуживания (QoS).
- Ограниченная безопасность. Хотя L2-коммутаторы могут поддерживать VLAN, они не обеспечивают глубокую фильтрацию трафика или контроль доступа на уровне IP.

Кроме того, L2 коммутаторы хорошо работают только в малых, средних сетях с простой топологией. В сложных инфраструктурах они могут потребовать использования дополнительных устройств.

### Чем отличаются коммутаторы L2 и L2+###

L2+ — это коммутатор второго уровня с добавленными функциями. Например, может быть добавлена поддержка статической маршрутизации, физического объединения в стек нескольких коммутаторов для отказоустойчивости, дополнительные функции безопасности и так далее.

> **Примечание.** В сравнительной таблице, приводимой в конце статьи, можно видеть, что уровни L2 и L2+ могут различаться на одну-две функции. Однако даже такая небольшая деталь может оказаться критичной, например, для вопросов отказоустойчивости или безопасности.


### L3/L3+ ###

Коммутаторы 3 уровня совмещают функции устройств 2 уровня и маршрутизаторов. Они способны выполнять коммутацию и маршрутизацию на основе IP-пакетов, что позволяет им сегментировать сеть на подсети (или VLAN) и маршрутизировать трафик между этими подсетями.

Такие устройства могут использовать современные протоколы, предназначенные для обеспечения динамической маршрутизации. В том числе это популярные технологии OSPF или RIP. Они используются для автоматического определения наилучших маршрутов передачи данных.
### Возможности применения

Коммутаторы 3 уровня широко используются в сетевых инфраструктурах, где на первом месте стоит эффективное распределение сетевого трафика между различными участками сети, такими как отделы компании или разнородные сетевые среды. Эти устройства подходят для организаций с большими сетями, где важно управлять трафиком на уровне IP и VLAN. Коротко рассмотрим основные сценарии применения устройств:

- Корпоративные сети. В крупных компаниях устройства используются для маршрутизации между сотнями VLAN, которые могут представлять разные отделы или филиалы компании.
- Центры обработки данных в ЦОД, где важна высокая пропускная способность и гибкость, коммутаторы L3 обеспечивают маршрутизацию между сетевыми сегментами и серверами.
- Магистральные сети. В магистральных сетях устройства налаживают высокоскоростную маршрутизацию и коммутацию между локальными и удаленными сегментами сети.

Также коммутаторы типа L3 используются в сетях, где нужна высокая производительность и стабильность, например в университетах, больницах или других подобных крупных организациях.

### Достоинства и недостатки

Высокий уровень коммутации наделяет L3-коммутаторы большим списком важных преимуществ:

- **Интеграция коммутации и маршрутизации.** Устройства объединяют функции L2-коммутаторов и маршрутизаторов, что упрощает управление сетью и повышает ее производительность.
- **Высокая скорость работы с данными.** L3-коммутаторы обеспечивают более быструю маршрутизацию по сравнению с традиционными маршрутизаторами за счет аппаратной обработки трафика.
- **Поддержка VLAN.** Маршрутизация между VLAN без необходимости использования отдельных маршрутизаторов значительно упрощает структуру сети.
- **Гибкость и масштабируемость.** Коммутаторы L3 легко интегрируются в сети различного масштаба, от корпоративных сетей до центров обработки данных.
- **Управление трафиком и QoS.** Поддержка Quality of Service позволяет приоритизировать критический трафик и управлять задержками. Полезно для мультимедийных приложений.

Что касается недостатков L3-коммутаторов, они достаточно дорогие, поэтому их покупка не всегда рациональна. Они нуждаются в более сложной настройке. В небольших сетях с минимальными требованиями к маршрутизации использование L3-коммутаторов может быть излишним и неэффективным

### Коммутаторы L3+ — расширенные функции маршрутизации и управления трафиком

#### **1. Определение и отличие от L3**

**Коммутатор L3+** — это устройство уровня L3 с дополнительными функциями, приближающими его к маршрутизаторам высокого класса.

**Ключевые отличия от L3:**  
✅ **Поддержка расширенных протоколов маршрутизации** (BGP, EIGRP, IS-IS).  
✅ **Глубокая аналитика трафика** (NetFlow, sFlow, IPFIX).  
✅ **Аппаратное ускорение сложных операций** (TCAM-память для ACL, QoS).  
✅ **Интеграция с overlay-сетями** (VXLAN, MPLS).

---

### **2. Основные функции коммутаторов L3+**

#### **2.1. Расширенная маршрутизация**

|**Функция**|**Описание**|
|---|---|
|**Динамическая маршрутизация**|Поддержка BGP, OSPF, EIGRP, IS-IS для работы в крупных сетях (например, между филиалами).|
|**Policy-Based Routing (PBR)**|Маршрутизация на основе политик (например, перенаправление VoIP-трафика через определённый шлюз).|
|**ECMP (Equal-Cost Multipath)**|Балансировка нагрузки между несколькими равнозначными маршрутами.|

#### **2.2. Управление трафиком и QoS**

- **Глубокая приоритезация трафика** (DSCP, 802.1p, CoS).
    
- **Аппаратное ограничение полосы пропускания** (портов, VLAN, подсетей).
    
- **Аналитика в реальном времени** (NetFlow для выявления аномалий).
    

#### **2.3. Безопасность**

- **ACL (Access Control Lists)** с поддержкой L3-L4 фильтрации.
    
- **DHCP Snooping + IP Source Guard** — защита от спуфинга.
    
- **Защита от DDoS** (например, rate limiting для ICMP/UDP-флуда).
    

#### **2.4. Виртуализация сетей**

- **VXLAN** — overlay-сети поверх IP (актуально для ЦОД).
    
- **MPLS** — поддержка теговой маршрутизации (используется провайдерами).
    

---

### **3. Области применения L3+**

- **Корпоративные сети:**
    
    - Маршрутизация между десятками VLAN и филиалами.
        
    - Пример: Cisco Catalyst 9300 с поддержкой BGP.
        
- **ЦОД (Центры обработки данных):**
    
    - VXLAN для виртуализации сетей.
        
    - Пример: Arista 7050X с поддержкой EVPN.
        
- **Операторские сети:**
    
    - MPLS для маршрутизации между POP-точками.
        
    - Пример: Juniper MX204.
        

---

### **4. Примеры коммутаторов L3+**

#### **4.1. Cisco Catalyst 9300**

- **Уровень:** L3+ (поддержка BGP, OSPF, VXLAN).
    
- **Особенности:**
    
    - Аппаратное ускорение ACL/QoS.
        
    - Интеграция с SD-Access (Cisco DNA Center).
        
- **Применение:** Крупные корпоративные сети, кампусные сети.
    

#### **4.2. Arista 7050X**

- **Уровень:** L3+ (EVPN, VXLAN, MLAG).
    
- **Особенности:**
    
    - Сверхнизкие задержки (<1 мкс).
        
    - Поддержка NetFlow/sFlow.
        
- **Применение:** ЦОД, высокочастотный трейдинг.
    

#### **4.3. Juniper EX4650**

- **Уровень:** L3+ (MPLS, BGP, IPv6).
    
- **Особенности:**
    
    - Гибридный режим (L2/L3).
        
    - Поддержка Zero Trust.
        
- **Применение:** Операторские сети, магистральные решения.
    

---

### **5. Сравнение L3 и L3+**

| **Характеристика**    | **L3**                 | **L3+**                  |
| --------------------- | ---------------------- | ------------------------ |
| **Маршрутизация**     | Статическая, OSPF, RIP | BGP, EIGRP, IS-IS, PBR   |
| **Overlay-сети**      | Нет                    | VXLAN, MPLS              |
| **Аналитика трафика** | Basic (SNMP)           | NetFlow, sFlow, IPFIX    |
| **Безопасность**      | Стандартные ACL        | Rate limiting, Anti-DDoS |

---

### **6. Когда выбирать L3+?**

1. **Для крупных сетей** с десятками VLAN и филиалов.
    
2. **В ЦОД** для виртуализации (VXLAN/MPLS).
    
3. **Для интеграции с SDN** (Cisco ACI, VMware NSX).
    
4. **Если нужна продвинутая аналитика** (например, для SOC).


### L4/L4+ ###

### Коммутаторы L4 и L4+ — управление трафиком на транспортном уровне

#### **1. Определение и отличие от L2/L3**

**Коммутаторы L4 (Layer 4)** работают на **транспортном уровне модели OSI** (TCP/UDP), что позволяет анализировать не только IP-адреса и MAC-адреса, но и **порты, сессии и параметры протоколов**.

**Коммутаторы L4+** — это расширенная версия с поддержкой:  
✅ **Глубокой инспекции пакетов (DPI)**.  
✅ **Балансировки нагрузки (Load Balancing)**.  
✅ **Управления приложениями (Application-Aware Routing)**.

---

### **2. Ключевые функции коммутаторов L4/L4+**

#### **2.1. Анализ транспортного уровня**

- **Фильтрация по портам** (например, блокировка SSH на 22 порту).
    
- **Распознавание протоколов** (HTTP, FTP, VoIP).
    
- **Управление сессиями** (максимальное число подключений, таймауты).
    

#### **2.2. Балансировка нагрузки (Load Balancing)**

- **Распределение трафика между серверами** на основе:
    
    - Round Robin.
        
    - Least Connections.
        
    - Hash-based (по IP/порту).
        
- **Поддержка алгоритмов для приложений** (например, оптимизация для HTTP/HTTPS).
    

#### **2.3. Безопасность**

- **Защита от DDoS** (ограничение запросов на уровне TCP/UDP).
    
- **Stateful Inspection** — контроль состояния сессий (как в файрволах).
    
- **Анализ сигнатур трафика** (например, блокировка SQL-инъекций).
    

#### **2.4. QoS на уровне приложений**

- **Приоритезация VoIP (SIP/RTP)**.
    
- **Трафик-шейпинг для видеостриминга** (YouTube, Zoom).
    
- **Ограничение скорости для P2P-протоколов**.
    

---

### **3. Отличия L4 от L4+**

|**Функция**|**L4**|**L4+**|
|---|---|---|
|**Балансировка нагрузки**|Базовая (Round Robin)|Умная (на основе загрузки CPU серверов)|
|**Анализ трафика**|По портам и протоколам|DPI (Deep Packet Inspection)|
|**Интеграция с SDN**|Нет|Поддержка OpenFlow, VMware NSX|
|**Примеры устройств**|HP 2910, Zyxel XGS4600|F5 BIG-IP, Citrix ADC|

---

### **4. Где применяются L4/L4+ коммутаторы?**

1. **ЦОД и облачные платформы** — балансировка нагрузки между серверами.
    
2. **Корпоративные сети** — оптимизация VoIP и видеоконференций.
    
3. **Телеком-операторы** — управление трафиком абонентов (например, ограничение BitTorrent).
    
4. **Медиасервисы (CDN)** — маршрутизация видео-трафика.
    

---

### **5. Примеры устройств**

#### **5.1. Коммутаторы L4**

- **Zyxel XGS4600** — поддерживает ACL на уровне L4 (TCP/UDP-порты).
    
- **Cisco Catalyst 3560** — базовый L4 QoS для VoIP.
    

#### **5.2. Коммутаторы L4+**

- **F5 BIG-IP** — полноценный ADC (Application Delivery Controller) с DPI.
    
- **Citrix ADC (Netscaler)** — балансировка нагрузки + защита от атак.
    
- **Juniper MX Series** — MPLS + L4-функции для операторов.
    

---

### **6. Сравнение с L2/L3**

| **Уровень** | **Что анализирует?**          | **Пример использования**               |
| ----------- | ----------------------------- | -------------------------------------- |
| **L2**      | MAC-адреса                    | Локальная сеть (Ethernet)              |
| **L3**      | IP-адреса                     | Маршрутизация между VLAN               |
| **L4**      | TCP/UDP-порты                 | Фильтрация трафика (блокировка портов) |
| **L4+**     | Данные приложений (HTTP, DNS) | Балансировка нагрузки, DDoS-защита     |

---
---

### Примеры

#### Zyxel XGS4600-32 — коммутатор Layer 3 ###
- Имеет 24 гигабитных порта под витую пару, 4 порта Combo (SFP/RJ‑45) и четыре интегрированных 10-Gigabit SFP+
- Поддерживает объединение в физический стек с использованием одного или двух слотов 10-Gigabit SFP+.
- Поддерживает и статическую, и динамическую маршрутизацию.
- Имеет два отдельных разъёма подключения питания.
 ![[Pasted image 20250601152822.png]]

### Zyxel XGS2210 — коммутатор Layer 2+ ###
Одно из предназначений — создание сети для передачи трафика VoIP, видеоконференций, IPTV и IP-камер видеонаблюдения наблюдения и управление трафиком современных конвергентных приложений.

Поддерживает объединение в физический стек с помощью двух портов 10-Gigabit SFP+.

Поддерживает PoE (стандарты IEEE 802.3af PoE и 802.3at PoE Plus) до 30Ватт на порт для питания устройств с большей потребляемой мощностью, например, это могут быть точки доступа 802.11ac и IP-видеотелефоны.

В данной модели присутствуют дополнительные средства поддержки безопасности, например, IP source guard, DHCP snooping и ARP inspection, механизмы фильтрации L2, L3 и L4, функцию MAC freeze, изоляцию портов и создание гостевой VLAN.

Добавлены элементы статической маршрутизации IPv4/v6 и назначение DHCP relay с конкретным IP интерфейсом отправителя.

![[Pasted image 20250601152908.png]]

### Zyxel GS2220 — коммутатор Layer 2

Интересно, что серия GS2220 — это гибридные коммутаторы с доступными вариантами управления: через облако Zyxel Nebula, через локальное подключение, плюс поддержка SNMP.

Из интересных функций можно выделить L2 multicast, IGMP snooping, Multicast VLAN Registration (MVR).  
Данная модель неплохо подходит и для обеспечения сетевой среды VoIP, видеоконференций и IPTV.

---

![[Pasted image 20250601152953.png]]

---
---
---
https://habr.com/ru/companies/zyxel/articles/531498/